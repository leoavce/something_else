<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Realtime Chat + Notes + Lunch</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Simple Chat</div>
    <div class="auth-area">
      <span id="user-name" class="user-name"></span>
      <button id="btn-logout" class="btn">로그아웃</button>
    </div>
  </header>

  <main id="app-root" class="grid hidden">
    <section class="panel">
      <div id="lunch-banner" class="lunch-banner hidden">
        <div class="lunch-row">
          <strong id="lunch-title">점심 후보</strong>
          <span id="lunch-timer" class="lunch-timer" title="남은 시간">05:00</span>
        </div>

        <div id="lunch-candidates" class="lunch-candidates"></div>

        <div id="lunch-cta" class="lunch-cta hidden">
          <span id="lunch-active" class="lunch-active"></span>
          <span id="lunch-remaining" class="lunch-remaining">수락까지 남은 인원: —명</span>
          <button id="btn-lunch-accept" class="btn primary">수락</button>
          <button id="btn-lunch-cancel" class="btn">취소</button>
        </div>

        <!-- ✅ 수락/거부 현황 -->
        <div class="lunch-progress">
          <div class="lunch-accepted-wrap">
            <span class="muted">수락:</span>
            <div id="lunch-accepted" class="lunch-acceptedlist"></div>
          </div>
          <div class="lunch-rejected-wrap">
            <span class="muted">거부:</span>
            <span id="lunch-rejected" class="lunch-rejected">0명이 거부함</span>
          </div>
        </div>

        <div id="lunch-status" class="lunch-status">
          <button id="btn-lunch-dismiss" class="btn small hidden" aria-label="닫기">×</button>
        </div>
      </div>

      <h2 class="panel-title">채팅방</h2>
      <ul id="messages" class="messages" aria-live="polite"></ul>

      <div class="inputbar">
        <input id="nickname" class="nick-input" placeholder="표시 이름(최대 20자)" maxlength="20" />
        <button id="save-nick" class="btn">저장</button>
      </div>

      <div class="inputbar">
        <input id="message" class="msg-input" placeholder="메시지를 입력하세요 (@점심메뉴_김밥_라멘)" maxlength="1000" />
        <button id="send" class="btn primary">전송</button>
      </div>
    </section>

    <aside class="panel">
      <div class="tabs">
        <button id="tab-notes"  class="tab active">메모</button>
        <button id="tab-alarms" class="tab">알람</button>
      </div>

      <section id="notes-panel">
        <h2 class="panel-title">내 메모</h2>
        <div class="note-editor">
          <input id="note-title" class="note-title" placeholder="제목" maxlength="100" />
          <textarea id="note-body" class="note-body" rows="5" placeholder="내용"></textarea>
          <div class="note-actions">
            <button id="btn-note-save" class="btn primary">추가</button>
            <button id="btn-note-clear" class="btn">지우기</button>
          </div>
        </div>
        <ul id="note-list" class="note-list"></ul>
      </section>

      <section id="alarms-panel" class="hidden">
        <h2 class="panel-title">알람(토스트)</h2>
        <div class="keeper-form">
          <div class="keeper-row">
            <label class="label" for="eyeMins">눈 휴식 간격(분)</label>
            <input id="eyeMins" class="input small" type="number" min="1" value="20" />
          </div>
          <div class="keeper-row">
            <label class="label" for="stretchMins">스트레칭 간격(분)</label>
            <input id="stretchMins" class="input small" type="number" min="1" value="60" />
          </div>
          <div class="keeper-actions">
            <button id="btnStart" class="btn primary">시작</button>
            <button id="btnStop"  class="btn">정지</button>
          </div>
          <div id="ticker" class="keeper-ticker">대기 중…</div>
          <p class="keeper-hint">브라우저 알림 권한을 허용하면 시스템 알림도 함께 표시됩니다.</p>
        </div>
      </section>

      <div id="toast-root" class="toast-root" aria-live="polite" aria-atomic="true"></div>
    </aside>
  </main>

  <script type="module" src="./js/firebase_bootstrap.js"></script>
  <script type="module" src="./js/auth_gate.js"></script>
  <script type="module" src="./js/lunch.js"></script>
  <script type="module" src="./js/chat.js"></script>
  <script type="module" src="./js/notes.js"></script>
  <script type="module" src="./js/keeper.js"></script>
</body>
</html>
